.develop:
  stage: develop
  allow_failure: true
  needs: []

clang-format:
  extends:
    - .develop
  image: ghcr.io/ricosjp/allgebra/clang-format:21.06.1
  script:
    - check_format.sh

doxygen:
  extends:
    - .develop
  image: ghcr.io/ricosjp/allgebra/doxygen:21.10.2
  script:
    - doxygen
  artifacts:
    paths:
      - html/
    expire_in: 1 day

markdown-link-check:
  extends:
    - .develop
  image: node:16
  script:
    - npm install -g markdown-link-check
    - markdown-link-check README.md

keep-changelog:
  extends:
    - .develop
  image: alpine:latest
  before_script:
    - apk add git
  script:
    - git fetch
    - "! git diff --exit-code origin/master... -- CHANGELOG.md"
  except:
    - master
    - tags
